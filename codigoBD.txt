create database octocore;
use octocore; 
create table usuarios (
	idUsuario	int		primary key		auto_increment	unique,
   	usuario		varchar(15)	not null	unique,
   	senha		varchar(20)	not null,
   	linkPFP		varchar(255)	default 'https://miro.medium.com/v2/resize:fit:720/format:webp/1*g09N-jl7JtVjVZGcd-vL2g.jpeg',
   	pedidosTotais	int

);
create table cartoes (
	idCartao	int	primary key	auto_increment	unique,
    	numeroCC	varchar(19)	not null,
    	cvv		int	not null,
    	validade	varchar(5),
	isActive	boolean,
    	idUsuario	int,
    	foreign key (idUsuario) references usuarios(idUsuario)
);
create table enderecos(
	idEndereco	int	primary key	auto_increment	unique,
	nome		varchar(20)	not null,
    	cep		varchar(9) not null,
	codigoRastreio	varchar(13),
    	complemento 	varchar(30),
    	isActive	boolean,
    	idUsuario	int,
	foreign key (idUsuario) references usuarios(idUsuario)
);
create table pedidos (
	idPedido	int		primary key		auto_increment	unique,
    	estado		varchar(20)	not null,	
    	valorTotal	decimal(10,2),
	metodoPagamento	varchar(10),
	desconto	int	default 0,
	dataEHora	datetime,	
	idUsuario	int,
    	foreign key (idUsuario) references usuarios(idUsuario)
);
create table categorias (
	idCategoria	int	primary key	auto_increment	unique,
    	nome 		varchar(20) not null
);
create table produtos (
	idProduto	int	primary key	auto_increment	unique,
    	nome		varchar(40)	not null,
    	valorUnitario	decimal(10,2) not null,
    	quantidade	int	not null	default 0,
    	descricao 	varchar(80) default 'Essa é uma das peças ja feitas',
   	linkImagem 	varchar(255)	default 'https://static.wikia.nocookie.net/paper-shin-aka-keroro-gunsou/images/c/c1/John_Xina.png/revision/latest?cb=20220116222109',
    	idCategoria 	int,
    	foreign key (idCategoria) references categorias(idCategoria)
);
create table conteudo (
	idPedido	int,
	idProduto	int,
    	quantidade	int	default 1,
    	foreign key (idPedido) references pedidos(idPedido),
    	foreign key (idProduto) references produtos(idProduto)
)